<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>Locadora de Filmes - Seu filme está aqui</title>
        <h:outputStylesheet library="css" name="estilo.css" />
    </h:head>
    <h:body>


        <header id="main-header">Locadora de Filmes - Seu filme está aqui
        </header> 

        <nav id="menu">
            <ul>
                <center>
                    <li><a href="index.xhtml">Cadastrar</a></li>
                    <li><a href="lista.xhtml">Ver Lista</a></li>
                    <li><a href="cesta.xhtml">Cesta</a></li>
                </center>
            </ul>
        </nav>

        <div id="panelInput">
            <h3>Cadastre seus filmes agora:</h3><br/>

            <h:form>
                Título: <p:inputText id="titulo" value="#{controler.filme.titulo}" required="true" requiredMessage="O título não pode ser vazio."/> 
                <p:message id="m1" for="titulo" style="color:red"/> <br/>
                <br/>
                Data Lançamento: <p:inputText id="dataLancamento" value="#{controler.filme.data_lancamento}" required="true" requiredMessage="Data fora do formato dd/MM/yyyy">
                    <f:convertDateTime pattern="dd/MM/yyyy" for="dataLancamento"/> 
                </p:inputText>
                <p:message id="m2" for="dataLancamento" style="color:red"/> <br/>
                <br/>
                Nota: <p:inputText id="nota" value="#{controler.filme.nota}" required="true" requiredMessage="Por favor, A nota deve ser um inteiro de 1 até 5.">
                    <f:validateDoubleRange maximum="5" minimum="1"/>
                </p:inputText>
                <p:message id="m3" for="nota" style="color:red"/> <br/>
                <br/>
                Descrição: <p:inputTextarea id="descricao" value="#{controler.filme.descricao}" required="true" requiredMessage=" A descrição deve conter pelo menos 10 caracteres.">
                    <f:validateLength minimum="10" maximum="250"/>
                </p:inputTextarea>
                <p:message id="m4" for="descricao" style="color:red"/> <br/>
                <br/>
                Quantidade: <p:inputText id="quantidade" value="#{controler.filme.quantidade}" required="true" requiredMessage="A quantidade deve ser um número maior que zero."/>
                <p:message  for="quantidade" style="color:red"/> <br/><br/>                            <p:message id="m5" for="quantidade" style="color:red"/> <br/>


                <h:commandButton styleClass="button" action="#{controler.cadastraFilme()}" value="Cadastrar">
                </h:commandButton>
                <h:commandButton styleClass="button button2" value="Cancelar">
                    <f:ajax render="@form" resetValues="true"/>
                </h:commandButton>

            </h:form>
        </div>

        <p:fieldset legend="Filmes Cadastrados">
            <p:dataTable value="#{controler.filmes}" var="f">
                <p:column headerText="ID" sortBy="#{f.id}">
                    <f:facet name="header">Id</f:facet>
                    <p:outputLabel value="#{f.id}"/>
                </p:column>
                <p:column headerText="Título" sortBy="#{f.titulo}">
                    <f:facet name="header">Título</f:facet>
                    <p:outputLabel value="#{f.titulo}"/>
                </p:column>

                <p:column headerText="Descrição">
                    <f:facet name="header">Deescrição</f:facet>
                    <h:outputText value="#{f.descricao}"></h:outputText>
                </p:column>

                <p:column headerText="Data de Lançamento">
                    <f:facet name="header">Data de Lançamento</f:facet>
                    <h:outputText value="#{f.data_lancamento}"></h:outputText>
                </p:column>

                <p:column headerText="Nota">
                    <f:facet name="header">Nota</f:facet>
                    <h:outputText value="#{f.nota}"></h:outputText>
                </p:column>
            </p:dataTable>
        </p:fieldset>

                <br></br><br></br>

                </h:body>
                </html>

